/*!
 *  __  __                __                                     __
 * /\ \/\ \              /\ \             __                    /\ \
 * \ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 *  \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
 *   \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
 *    \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
 *     \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
 *                 /\___/                \ \____/
 *                 \/__/                  \/___/
 *
 * Powered by Hydejack v9.0.0-alpha.12 <https://hydejack.com/>
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{283:function(e,t,r){"use strict";r.r(t);var n=r(309),o=r(310),i=r(347),a=r(360),c=r(318),u=r(99),l=r(340),s=r(311),f=r(348),p=r(319),h=r(278),y=r(344),b=r(317),d=r(295),m=r(20),v=r(323),O=r.n(v),g=r(329),j=r.n(g),w=r(298),S=r(307),E=r(361),P=r(346),k=r(322);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=function(e){var t=e.background,r=e.color,n=e.image,o=e.overlay;return"".concat(r).concat(n||t).concat(""===o?"overlay":"")};function I(e){var t=e.protocol,r=e.host,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;return t!==n.protocol||r!==n.host}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=document.getElementById("_main"),n=Array.from(document.styleSheets).find((function(e){return e.ownerNode&&"_pageStyle"===e.ownerNode.id}))||{};this.sidebar=document.getElementById("_sidebar"),this.fadeDuration=t,this.rules=n.cssRules||n.rules,this.prevHash=R(j()(r)),this.themeColorEl=document.querySelector('meta[name="theme-color"]')}var t,r,n;return t=e,(r=[{key:"fetchImage2",value:function(e){var t=e.background,r=e.image;if(t||!r||""===r||"none"===r)return Object(w.a)(null);var n=new URL(r,window.location);return Object(E.a)({method:"GET",responseType:"blob",url:n,crossDomain:I(n),headers:{Accept:"image/*"}}).pipe(Object(u.a)((function(e){var t=e.response;return URL.createObjectURL(t)})),Object(P.a)((function(){return Object(w.a)(r)})))}},{key:"fetchImage",value:function(e){var t=j()(e),r=t.background,n=t.color,o=t.image,i=t.overlay,a=R(t);return a===this.prevHash?Object(S.b)():this.fetchImage2(t).pipe(Object(u.a)((function(e){var c=document.createElement("div");return c.classList.add("sidebar-bg"),"none"!==o&&""===i&&c.classList.add("sidebar-overlay"),r?c.style.background=r:(c.style.backgroundColor=n,e&&(c.style.backgroundImage="url(".concat(e,")"),c.objectURL=e)),[c,t,a]})))}},{key:"updateStyle",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.color,n=void 0===r?"#4fb1ba":r,o=t.themeColor,i=void 0===o?"#193747":o;if(this.themeColorEl&&window.setTimeout((function(){return e.themeColorEl.content=i}),250),this.rules)try{var a=O()(n),c=O()(i),u=a.darken(.1),l=O.a.hsl(c.hue(),10,20),s=O.a.hsl(c.hue(),10,25),f=a.fade(.5);this.rules[0].style.textDecorationColor=f,this.rules[0].style.borderColor=f,this.rules[1].style.textDecorationColor=n,this.rules[1].style.borderColor=n,this.rules[2].style.outlineColor=n,this.rules[3].style.backgroundColor=n,this.rules[3].style.borderColor=n,this.rules[4].style.boxShadow="0 0 0 3px ".concat(a.fade(.5)),this.rules[5].style.backgroundColor=u,this.rules[5].style.borderColor=u,this.rules[6].style.backgroundColor=n,this.rules[6].style.borderColor=n,this.rules[7].style.backgroundColor=u,this.rules[7].style.borderColor=u,this.rules[8].cssRules[0].style.setProperty("--body-bg",l),this.rules[8].cssRules[0].style.setProperty("--border-color",s),this.rules[9].cssRules[0].style.setProperty("--body-bg",l),this.rules[9].cssRules[0].style.setProperty("--border-color",s),this.rules[this.rules.length-1].style.backgroundColor=n}catch(e){}}},{key:"fade",value:function(e,t){var r=A(e,1)[0],n=A(t,3),o=n[0],i=n[1],a=n[2];return r.parentNode.insertBefore(o,r.nextElementSibling),this.updateStyle(i),this.prevHash=a,Object(m.e)(o,[{opacity:0},{opacity:1}],{duration:this.fadeDuration,easing:"ease"}).pipe(Object(k.a)((function(){r.objectURL&&URL.revokeObjectURL(r.objectURL),r.parentNode.removeChild(r)})))}}])&&L(t.prototype,r),n&&L(t,n),e}(),x=r(316);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _,D=["title","projects"];function H(e,t,r,a){var c=e.pipe(Object(x.a)((function(e){var t=e.flipType;return!D.includes(t)})));return Object(o.a)(function(e,t,r,n){var o=n.animationMain,a=n.settings;if(!o)return e;var c=e.pipe(Object(x.a)((function(e){return"title"===e.flipType})),Object(h.a)((function(e){var t=e.anchor;if(!t)return Object(w.a)({});var r=document.createElement("h1");r.classList.add("page-title"),r.textContent=t.textContent,r.style.transformOrigin="left top";var n=o.querySelector(".page");if(!n)return Object(w.a)({});m.h.call(n),n.appendChild(r),o.style.position="fixed",o.style.opacity=1;var i=t.getBoundingClientRect(),c=r.getBoundingClientRect(),u=parseInt(getComputedStyle(t).fontSize,10),l=parseInt(getComputedStyle(r).fontSize,10),f=i.left-c.left,p=i.top-c.top,h=u/l;t.style.opacity=0;var y=[{transform:"translate3d(".concat(f,"px, ").concat(p,"px, 0) scale(").concat(h,")")},{transform:"translate3d(0, 0, 0) scale(1)"}];return Object(m.e)(r,y,a).pipe(Object(s.a)({complete:function(){o.style.position="absolute"}}))})));return e.pipe(Object(h.a)((function(e){var n=e.flipType;return Object(i.a)(t.pipe(Object(x.a)((function(){return"title"===n})),Object(u.a)((function(e){var t=q(e.replaceEls,1)[0].querySelector(".page-title, .post-title");return t&&(t.style.opacity=0),t}))),r,(function(e){return e})).pipe(Object(s.a)((function(e){e&&(e.style.opacity=1),o.style.opacity=0})),Object(k.a)((function(){o.style.opacity=0})))}))).subscribe(),c}(e,t,r,a),function(e,t,r,o){var a=o.animationMain,c=o.settings;if(!a)return e;var u=e.pipe(Object(x.a)((function(e){return"project"===e.flipType})),Object(h.a)((function(e){var t=e.anchor,r=t.querySelector(".flip-project-img");if(!t||!r)return Object(w.a)({});var n=a.querySelector(".page");if(!n)return Object(w.a)({});var o=t.parentNode.querySelector(".flip-project-title"),i=o&&o.textContent||"|",u=document.createElement("h1");u.classList.add("page-title"),u.style.opacity=0,u.textContent=i;var l=document.createElement("div");l.classList.add("post-date"),l.classList.add("heading"),l.style.opacity=0,l.textContent="|",m.h.call(n),n.appendChild(u),n.appendChild(l);var f=document.createElement("div");f.classList=r.classList,f.classList.remove("project-card-img"),r.parentNode.insertBefore(f,r),r.classList.add("lead"),r.style.transformOrigin="left top",n.appendChild(r),a.style.position="fixed",a.style.opacity=1;var p=f.getBoundingClientRect(),h=r.getBoundingClientRect(),y=p.left-h.left,b=p.top-h.top,d=p.width/h.width,v=[{transform:"translate3d(".concat(y,"px, ").concat(b,"px, 0) scale(").concat(d,")")},{transform:"translate3d(0, 0, 0) scale(1)"}];return Object(m.e)(r,v,c).pipe(Object(s.a)({complete:function(){a.style.position="absolute"}}))})));return e.pipe(Object(h.a)((function(e){var o=e.flipType;return t.pipe(Object(x.a)((function(){return"project"===o})),Object(h.a)((function(e){var t=N(e.replaceEls,1)[0].querySelector(".aspect-ratio");t&&(t.style.opacity=0);var o=t&&t.querySelector("img");return Object(i.a)(o?Object(n.a)(o,"load"):Object(w.a)({}),r).pipe(Object(s.a)((function(){return t&&(t.style.opacity=1),a.style.opacity=0})),Object(h.a)((function(){return null!=o?Object(m.e)(a,[{opacity:1},{opacity:0}],{duration:500}):Object(w.a)({})})),Object(k.a)((function(){return a.style.opacity=0})))})))}))).subscribe(),u}(e,t,r,a),c)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}(_=regeneratorRuntime.mark((function e(){var t,v,O,g,j,w,S,E,P,k,A,C,L,R,I,x,q,M,N,U,_,D,B,V,z,Y,G,J,K,X;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C=function(e){var t=$(e.replaceEls,1)[0],r=e.flipType;return Object(m.e)(t,O,g).pipe(Object(c.a)({main:t,flipType:r}))},A=function(e){var t=e.main;return Object(m.e)(t,v,F({},g,{fill:"forwards"})).pipe(Object(c.a)({main:t}))},k=function(e){return e&&e.classList?e.classList.contains("flip-title")?"title":e.classList.contains("flip-project")?"project":e.getAttribute&&e.getAttribute("data-flip"):null},P=function(e,t,r){var n=Object(m.m)(t);return n.querySelector(".nav-btn").addEventListener("click",r),e.appendChild(n),e.lastElementChild},E=function(e,t){var r=t.pathname,n=Object(m.m)("_error-template"),o=n.querySelector(".this-link");return o&&(o.href=r,o.textContent=r),e.appendChild(n),e.lastElementChild},S=function(e){var t=Object(m.m)("_loading-template");return e.appendChild(t),e.lastElementChild},w=function(e){var t=Object(m.m)("_animation-template");return e.parentNode.insertBefore(t,e),e.previousElementSibling},j=function(e){var t=Object(m.m)("_permalink-template"),r=t.querySelector(".permalink");requestAnimationFrame((function(){return r.href="#".concat(e.id),e.appendChild(t)}))},e.next=10,Promise.all([].concat(W("fetch"in window?[]:[r.e(3).then(r.bind(null,358))]),W("customElements"in window?[]:[Promise.all([r.e(16),r.e(17)]).then(r.bind(null,351))]),W("animate"in Element.prototype?[]:[r.e(15).then(r.t.bind(null,353,7))]),W("IntersectionObserver"in window?[]:[r.e(4).then(r.t.bind(null,354,7))])));case 10:return e.next=12,m.t;case 12:t=/(?:title|file):\s*['"`](.*)['"`]/i,v=[{opacity:1},{opacity:0}],O=[{opacity:0,transform:"translateY(-3rem)"},{opacity:1,transform:"translateY(0)"}],g={duration:350,easing:"ease-out"},L=!!navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,R=document.querySelector("hy-push-state"),I=document.querySelector("hy-drawer"),x=document.querySelector("#_navbar > .content > .nav-btn-bar"),q=document.querySelector("link[rel=canonical]"),M=document.querySelector("meta[name=description]"),N=w(R),U=S(x),L&&(P(x,"_back-template",(function(){return window.history.back()})),P(x,"_forward-template",(function(){return window.history.forward()}))),D=(_=function(e,t){return Object(n.a)(R,e).pipe(Object(u.a)((function(e){return e.detail})),t?Object(u.a)(t):function(e){return e},Object(l.a)())})("hy-push-state-start",(function(e){return Object.assign(e,{flipType:k(e.anchor)})})),B=_("hy-push-state-ready"),V=_("hy-push-state-after"),z=_("hy-push-state-progress"),Y=_("hy-push-state-networkerror"),G=D.pipe(Object(u.a)((function(e){return Object.assign(e,{main:document.getElementById("_main")})})),Object(s.a)((function(e){e.main.style.pointerEvents="none"})),window._noDrawer&&I.classList.contains("cover")?Object(s.a)((function(){I.classList.remove("cover"),I.parentNode.appendChild(I)})):function(e){return e},Object(f.a)((function(e){return A(e,I)})),Object(s.a)((function(e){var t=e.main;return m.h.call(t)})),Object(l.a)()),z.subscribe((function(){return U.style.display="block"})),B.pipe(Object(p.a)({replaceEls:[document.getElementById("_main")]})).subscribe((function(e){var r=$(e.replaceEls,1)[0];r.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(j),U.style.display="none";var n=r.querySelector("#markdown-toc");n&&n.classList.add("toc-hide"),Array.from(r.querySelectorAll("pre.highlight > code")).map((function(e){return e.children[0]})).filter((function(e){return e&&t.test(e.innerText)})).forEach((function(e){var r=$(t.exec(e.innerText),2)[1],n=e.parentNode;n.removeChild(e),n.childNodes[0].splitText(1),n.removeChild(n.childNodes[0]),e.innerText=r,e.classList.add("pre-header");var o=n.parentNode.parentNode;o.insertBefore(e,o.firstChild)})),"complete"in HTMLImageElement.prototype&&r.querySelectorAll("img[width][height][loading=lazy]").forEach((function(e){e.complete||(e.style.opacity=0,e.addEventListener("load",(function(){e.style.opacity=1}),{once:!0}))}))})),V.pipe(Object(p.a)({replaceEls:[document.getElementById("_main")],documentFragment:document})).subscribe((function(e){var t=$(e.replaceEls,1)[0],r=e.documentFragment,n=r.querySelector("link[rel=canonical]");q&&n&&(q.href=n.href);var o=r.querySelector("meta[name=description]");M&&o&&(M.content=o.content),t.querySelectorAll("li[id^='fn:']").forEach((function(e){return e.tabIndex=0})),t.querySelectorAll("a[href^='#fn:']").forEach((function(e){return e.addEventListener("click",(function(e){return document.getElementById(e.currentTarget.hash.substr(1)).focus()}))})),t.querySelectorAll("pre, table:not(.highlight), .katex-display, .break-layout").forEach((function(e){return e.addEventListener("touchstart",(function(t){return e.scrollLeft>0&&t.stopPropagation()}),{passive:!1})}))})),J=V.pipe(Object(h.a)(C),Object(l.a)()),K=H(D,B,Object(o.a)(J,Y),{animationMain:N,settings:g}).pipe(Object(l.a)()),D.pipe(Object(h.a)((function(e){var t=Object(i.a)(Object(a.a)(350),G,K).toPromise();return e.transitionUntil(t),t}))).subscribe(),G.subscribe(),K.subscribe(),X=new T(2e3),V.pipe(Object(h.a)((function(e){var t=$(e.replaceEls,1)[0];return Object(i.a)(X.fetchImage(t),J,(function(e){return e})).pipe(Object(y.a)(D))})),Object(p.a)([document.querySelector(".sidebar-bg")]),Object(b.a)(),Object(d.a)((function(e){var t=$(e,2),r=t[0],n=t[1];return X.fade(r,n)}))).subscribe(),J.pipe(Object(p.a)({main:document.getElementById("_main")}),Object(s.a)((function(e){var t=e.main.querySelector("#markdown-toc");t&&(t.classList.remove("toc-hide"),t.classList.add("toc-show"))}))).subscribe(),Y.pipe(Object(h.a)((function(e){var t=e.url;U.style.display="none";var r=document.getElementById("_main");return r.style.pointerEvents="",m.h.call(N.querySelector(".page")),m.h.call(r),E(r,t),Object(m.e)(r,O,F({},g,{fill:"forwards"}))}))).subscribe(),Promise.resolve().then(r.bind(null,339)),window._pushState=R;case 56:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var o=_.apply(e,t);function i(e){G(o,r,n,i,a,"next",e)}function a(e){G(o,r,n,i,a,"throw",e)}i(void 0)}))})()},339:function(e,t,r){"use strict";r.r(t),r.d(t,"HyPushState",(function(){return Qe}));var n,o=r(308),i=r(293),a=r(309),c=r(310),u=r(357),l=r(343),s=r(345),f=r(99),p=r(316),h=r(311),y=r(319),b=r(317),d=r(340),m=r(356),v=r(318),O=r(320),g=r(278),j=r(342),w=r(346),S=r(344),E=r(279),P=r(9),k=r(349);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e){return function(t){return t.pipe(Object(j.a)(e),Object(p.a)((function(e){return L(e,2)[1]})),Object(f.a)((function(e){return L(e,1)[0]})))}}function T(e,t){return P.a.create((function(r){var n=new AbortController,o=n.signal,i=null;return fetch(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{signal:o})).then((function(e){i=e,r.next(e),r.complete()})).catch((function(e){return r.error(e)})),function(){i||n.abort()}}))}function x(e){var t=e.protocol,r=e.host,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;return t!==n.protocol||r!==n.host}function q(){return window.pageYOffset||document.body.scrollTop}!function(e){e.Init="init",e.Hint="hint",e.Push="push",e.Pop="pop"}(n||(n={}));var M=function(e,t){return(e.matches||e.msMatchesSelector).call(e,t)};function N(e){return e&&""===e.target}function U(e,t){var r=e.url,n=e.anchor,o=e.event,i=o.metaKey,a=o.ctrlKey;return!i&&!a&&N(n)&&!x(r,t)}function _(e,t){var r=e.url;return N(e.anchor)&&!x(r,t)&&!function(e){var t=e.hash,r=e.origin,n=e.pathname,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;return""!==t&&r===o.origin&&n===o.pathname}(r,t)}function D(e){var t=e.cause,r=e.url,o=r.pathname,i=r.hash;return o===e.oldURL.pathname&&(t===n.Pop||t===n.Push&&""!==i)}var H=r(298),$=r(347),B=r(359);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t}var t,r,n;return t=e,(r=[{key:"fetchPage",value:function(e){return T(e.url.href,{method:"GET",mode:"cors",headers:{Accept:"text/html"}}).pipe(Object(g.a)((function(e){return e.text()})),Object(f.a)((function(t){return z({},e,{response:t})})),Object(w.a)((function(t){return Object(H.a)(z({},e,{error:t,response:null}))})))}},{key:"selectPrefetch",value:function(e,t,r){return e.href===t.url.href?Object(H.a)(t):r.pipe(Object(B.a)(1))}},{key:"getResponse",value:function(e,t,r){return Object($.a)(this.selectPrefetch(t.url,r,e),this.animPromise).pipe(Object(f.a)((function(e){return z({},F(e,1)[0],{},t)})))}},{key:"animPromise",get:function(){return this.parent.animPromise}}])&&G(t.prototype,r),n&&G(t,n),e}(),K=r(102),X=r(350),Q=r(322);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t}var t,r,n;return t=e,(r=[{key:"removeScriptTags",value:function(e){var t=this,r=[];return e.forEach((function(e){return e.querySelectorAll(t.scriptSelector).forEach((function(e){var t=[e,e.previousSibling];e.parentNode.removeChild(e),r.push(t)}))})),r}},{key:"reinsertScriptTags",value:function(e){var t=this;if(!this.scriptSelector)return Promise.resolve(e);var r=e.scripts,n=document.write;return Object(K.a)(r).pipe(Object(X.a)((function(e){return t.insertScript(e)})),Object(w.a)((function(t){return Object(H.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{error:t}))})),Object(Q.a)((function(){return document.write=n})),Object(v.a)(e)).toPromise()}},{key:"insertScript",value:function(e){var t=Z(e,2),r=t[0],n=t[1];return document.write=function(){for(var e=document.createElement("div"),t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.innerHTML=r.join(),Array.from(e.childNodes).forEach((function(e){n.parentNode.insertBefore(e,n.nextSibling)}))},new Promise((function(e,t){""!==r.src?(r.addEventListener("load",e),r.addEventListener("error",t),n.parentNode.insertBefore(r,n.nextSibling)):(n.parentNode.insertBefore(r,n.nextSibling),e())}))}},{key:"scriptSelector",get:function(){return this.parent.scriptSelector}}])&&ne(t.prototype,r),n&&ne(t,n),e}();function ie(e,t){e.forEach((function(e){e.querySelectorAll("[href]").forEach(ae("href",t)),e.querySelectorAll("[src]").forEach(ae("src",t)),e.querySelectorAll("img[srcset]").forEach(function(e,t){return function(r){try{r.setAttribute(e,r.getAttribute(e).split(/\s*,\s*/).map((function(e){var r=e.split(/\s+/);return r[0]=new URL(r[0],t).href,r.join(" ")})).join(", "))}catch(e){}}}("srcset",t)),e.querySelectorAll("blockquote[cite]").forEach(ae("cite",t)),e.querySelectorAll("del[cite]").forEach(ae("cite",t)),e.querySelectorAll("ins[cite]").forEach(ae("cite",t)),e.querySelectorAll("q[cite]").forEach(ae("cite",t)),e.querySelectorAll("img[longdesc]").forEach(ae("longdesc",t)),e.querySelectorAll("frame[longdesc]").forEach(ae("longdesc",t)),e.querySelectorAll("iframe[longdesc]").forEach(ae("longdesc",t)),e.querySelectorAll("img[usemap]").forEach(ae("usemap",t)),e.querySelectorAll("input[usemap]").forEach(ae("usemap",t)),e.querySelectorAll("object[usemap]").forEach(ae("usemap",t)),e.querySelectorAll("form[action]").forEach(ae("action",t)),e.querySelectorAll("button[formaction]").forEach(ae("formaction",t)),e.querySelectorAll("input[formaction]").forEach(ae("formaction",t)),e.querySelectorAll("video[poster]").forEach(ae("poster",t)),e.querySelectorAll("object[data]").forEach(ae("data",t)),e.querySelectorAll("object[codebase]").forEach(ae("codebase",t)),e.querySelectorAll("object[archive]").forEach(function(e,t){return function(r){try{r.setAttribute(e,r.getAttribute(e).split(/[\s,]+/).map((function(e){return new URL(e,t).href})).join(", "))}catch(e){}}}("archive",t))}))}function ae(e,t){return function(r){try{r.setAttribute(e,new URL(r.getAttribute(e),t).href)}catch(e){}}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.scriptManager=new oe(t)}var t,r,n;return t=e,(r=[{key:"getTitle",value:function(e){return(e.querySelector("title")||{textContent:""}).textContent}},{key:"getReplaceElements",value:function(e){if(this.replaceSelector)return this.replaceSelector.split(",").map((function(t){return e.querySelector(t)}));if(this.el.id)return[e.getElementById(this.el.id)];var t=Array.from(document.getElementsByTagName(this.el.tagName)).indexOf(this.el);return[e.querySelectorAll(this.el.tagName)[t]]}},{key:"responseToContent",value:function(e){try{var t=e.response,r=(i=t,document.createRange().createContextualFragment(i)),n=this.getTitle(r),o=this.getReplaceElements(r);return se({},e,{documentFragment:r,title:n,replaceEls:o,scripts:this.scriptSelector?this.scriptManager.removeScriptTags(o):[]})}catch(e){console.error(e)}var i}},{key:"replaceContentWithSelector",value:function(e){this.replaceSelector.split(",").map((function(e){return document.querySelector(e)})).forEach((function(t,r){return t.parentNode.replaceChild(e[r],t)}))}},{key:"replaceContentWholesale",value:function(e){var t=ce(e,1)[0];this.el.innerHTML=t.innerHTML}},{key:"replaceContent",value:function(e){this.replaceSelector?this.replaceContentWithSelector(e):this.replaceContentWholesale(e)}},{key:"updateDOM",value:function(e){try{var t=e.replaceEls;x(this.parent)&&ie(t,this.parent.href),this.replaceContent(t)}catch(t){throw se({},e,{error:t})}}},{key:"reinsertScriptTags",value:function(e){return this.scriptManager.reinsertScriptTags(e)}},{key:"el",get:function(){return this.parent.el}},{key:"replaceSelector",get:function(){return this.parent.replaceSelector}},{key:"scriptSelector",get:function(){return this.parent.scriptSelector}}])&&pe(t.prototype,r),n&&pe(t,n),e}(),ye=r(295),be=r(294);function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me=function(e){return Array.prototype.concat.apply([],e)},ve=function(e){return{addedNodes:new Set(me(e.map((function(e){return Array.from(e.addedNodes)})))),removedNodes:new Set(me(e.map((function(e){return Array.from(e.removedNodes)}))))}},Oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"setupEventListeners",value:function(){var e=this,t=Object(a.a)(this.el,"click").pipe(Object(f.a)((function(t){var r=function(e,t){for(var r=e;null!=r;){if(M(r,t))return r;r=r.parentNode instanceof Element?r.parentNode:null}return null}(t.target,e.linkSelector);if(r instanceof HTMLAnchorElement)return[t,r]})),Object(p.a)((function(e){return!!e}))),r=function(e,t){return e.matches(t)?Object(H.a)(e):Object(K.a)(e.querySelectorAll(t))};return{hintEvent$:this.$.linkSelector.pipe(Object(g.a)((function(t){var n,o,i,u=new Map,l=function(e){u.has(e)||u.set(e,function(e){return Object(c.a)(Object(a.a)(e,"mouseenter",{passive:!0}),Object(a.a)(e,"touchstart",{passive:!0}),Object(a.a)(e,"focus",{passive:!0})).pipe(Object(f.a)((function(t){return[t,e]})))}(e))},s=function(e){u.delete(e)};return(o=e.el,i={childList:!0,subtree:!0},P.a.create((function(e){var t=new MutationObserver((function(t){return t.forEach((function(t){return e.next(t)}))}));return t.observe(o,i),function(){t.disconnect()}}))).pipe(Object(y.a)({addedNodes:[e.el],removedNodes:[]}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){var r=[];return t.pipe(Object(h.a)((function(e){return r.push(e)})),Object(k.a)(e),Object(f.a)((function(){return r})),Object(h.a)((function(){return r=[]})))}}(500),Object(f.a)(ve),Object(g.a)((function(e){var n=e.addedNodes,o=e.removedNodes;return Object(K.a)(o).pipe(Object(p.a)((function(e){return e instanceof Element})),Object(ye.a)((function(e){return r(e,t)})),Object(h.a)(s)).subscribe(),Object(K.a)(n).pipe(Object(p.a)((function(e){return e instanceof Element})),Object(ye.a)((function(e){return r(e,t)})),Object(h.a)(l)).subscribe(),Object(K.a)(u.values()).pipe(Object(be.a)())})),(n=e.$.prefetch,function(e){return n.pipe(Object(g.a)((function(t){return t?e:E.a})))}))}))),pushEvent$:t}}}])&&de(t.prototype,r),n&&de(t,n),e}();function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t}var t,r,n;return t=e,(r=[{key:"onStart",value:function(e){var t,r=this;this.animPromise=(t=this.duration,new Promise((function(e){return setTimeout(e,t)}))),this.parent.fireEvent("start",{detail:je({},e,{transitionUntil:function(e){r.animPromise=Promise.all([r.animPromise,e])}})})}},{key:"emitDOMError",value:function(e){var t=e.replaceElMissing,r=e.url;t?(window.history.back(),setTimeout((function(){return document.location.assign(r)}),100)):this.parent.fireEvent("error",{detail:e})}},{key:"emitNetworkError",value:function(e){this.parent.fireEvent("networkerror",{detail:e})}},{key:"emitError",value:function(e){this.parent.fireEvent("error",{detail:e})}},{key:"emitReady",value:function(e){this.parent.fireEvent("ready",{detail:e})}},{key:"emitAfter",value:function(e){this.parent.fireEvent("after",{detail:e})}},{key:"emitProgress",value:function(e){this.parent.fireEvent("progress",{detail:e})}},{key:"emitLoad",value:function(e){this.parent.fireEvent("load",{detail:e})}},{key:"animPromise",get:function(){return this.parent.animPromise},set:function(e){this.parent.animPromise=e}},{key:"duration",get:function(){return this.parent.duration}}])&&Se(t.prototype,r),n&&Se(t,n),e}();function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}window.HashChangeEvent=window.HashChangeEvent||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.oldURL,n=void 0===r?"":r,o=t.newURL,i=void 0===o?"":o,a=new CustomEvent(e);return a.oldURL=n,a.newURL=i,a};var Le=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.updateHistoryScrollPosition=function(){if(!x(r.parent)){var e=r.assignScrollPosition(history.state||{});history.replaceState(e,document.title)}},this.parent=t}var t,r,o;return t=e,(r=[{key:"updateHistoryState",value:function(e){var t=e.cause,r=e.replace,o=e.url,i=e.oldURL;if(!x(this.parent))switch(t){case n.Init:case n.Push:var a=this.parent.histId;if(r||o.href===location.href){var c=ke({},history.state,Ae({},a,{}));history.replaceState(c,document.title,o.href)}else history.pushState(Ae({},a,{}),document.title,o.href);case n.Pop:this.parent.simulateHashChange&&function(e,t){e.hash!==t.hash&&window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:e.href,oldURL:t.href}))}(o,i)}}},{key:"updateTitle",value:function(e){var t=e.cause,r=e.title;document.title=r,x(this.parent)||t!==n.Push||history.replaceState(history.state,r)}},{key:"assignScrollPosition",value:function(e){var t,r,n,o=this.parent.histId;return ke({},e,Ae({},o,ke({},e[o],{scrollTop:q(),scrollHeight:(t=document.documentElement,r=document.body,n="scrollHeight",t[n]||r[n])})))}}])&&Ce(t.prototype,r),o&&Ce(t,o),e}();function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,"scrollRestoration"in history&&(history.scrollRestoration="manual")}var t,r,o;return t=e,(r=[{key:"manageScrollPosition",value:function(e){var t=e.cause,r=e.url.hash;switch(t){case n.Push:this.scrollHashIntoView(r,{behavior:"smooth",block:"start",inline:"nearest"});break;case n.Pop:this.restoreScrollPosition();break;case n.Init:this.restoreScrollPositionOnReload()}}},{key:"elementFromHash",value:function(e){return document.getElementById(decodeURIComponent(e.substr(1)))}},{key:"scrollHashIntoView",value:function(e,t){if(e){var r=this.elementFromHash(e);r&&r.scrollIntoView(t)}else window.scroll(window.pageXOffset,0)}},{key:"restoreScrollPosition",value:function(){var e=this.parent.histId,t=(history.state&&history.state[e]||{}).scrollTop;null!=t&&window.scroll(window.pageXOffset,t)}},{key:"restoreScrollPositionOnReload",value:function(){var e=this,t=this.parent.histId;history.state&&history.state[t]&&0===q()?this.restoreScrollPosition():location.hash&&requestAnimationFrame((function(){return e.scrollHashIntoView(location.hash,!0)}))}}])&&Re(t.prototype,r),o&&Re(t,o),e}();function Te(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t,r){return t&&Ue(e.prototype,t),r&&Ue(e,r),e}function De(e,t,r){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ze(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function He(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){return function(){var t,r=ze(e);if(We()){var n=ze(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Fe(this,t)}}function Fe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ge,Je,Ke=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":Ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Xe=function(e){He(r,e);var t=Be(r);function r(){var e;return Ne(this,r),(e=t.apply(this,arguments)).$connected=new i.a,e}return _e(r,[{key:"connectedCallback",value:function(){De(ze(r.prototype),"connectedCallback",this).call(this),this.$connected.next(!0)}},{key:"disconnectedCallback",value:function(){De(ze(r.prototype),"disconnectedCallback",this).call(this),this.$connected.next(!1)}},{key:"firstUpdated",value:function(){this.firstUpdate=!0}},{key:"updated",value:function(e){if(!this.firstUpdate){var t,r=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=qe(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}(e.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;n in this.$&&this.$[n].next(this[n])}}catch(e){r.e(e)}finally{r.f()}}this.firstUpdate=!1}}]),r}(o.a),Qe=(Je=function(e){He(r,e);var t=Be(r);function r(){var e;return Ne(this,r),(e=t.apply(this,arguments)).el=Ve(e),e.linkSelector="a[href]:not([data-no-push])",e.prefetch=!1,e.duration=0,e.simulateHashChange=!1,e.baseURL=window.location.href,e.$={},e.scrollManager=new Ie(Ve(e)),e.historyManager=new Le(Ve(e)),e.fetchManager=new J(Ve(e)),e.updateManager=new he(Ve(e)),e.eventManager=new Ee(Ve(e)),e._url=new URL(e.baseURL),e.reload$=new i.a,e.cacheNr=0,e.upgrade=function(){var t=e.setupEventListeners(),r=t.pushEvent$,o=t.hintEvent$,i={},s=r.pipe(Object(f.a)((function(t){var r=xe(t,2),o=r[0],i=r[1];return{cause:n.Push,url:new URL(i.href,e.href),anchor:i,event:o,cacheNr:e.cacheNr}})),Object(p.a)((function(t){return U(t,Ve(e))})),Object(h.a)((function(t){t.event.preventDefault(),e.historyManager.updateHistoryScrollPosition()}))),E=Object(a.a)(window,"popstate").pipe(Object(p.a)((function(){return window.history.state&&window.history.state[e.histId]})),Object(f.a)((function(t){return{cause:n.Pop,url:new URL(window.location.href),cacheNr:e.cacheNr,event:t}}))),P=e.reload$,k=Object(c.a)(s,E,P).pipe(Object(y.a)({url:new URL(window.location.href)}),Object(b.a)(),Object(f.a)((function(e){var t=xe(e,2),r=t[0],n=t[1];return Object.assign(n,{oldURL:r.url})})),Object(d.a)()),A=k.pipe(Object(p.a)((function(e){return!D(e)})),Object(d.a)()),C=k.pipe(Object(p.a)((function(e){return D(e)})),Object(p.a)((function(){return history.state&&history.state[e.histId]})),Object(m.a)(u.a),Object(h.a)((function(t){e.historyManager.updateHistoryState(t),e.scrollManager.manageScrollPosition(t)}))),L=Object(l.a)((function(){return Object(c.a)(A.pipe(Object(v.a)(!0)),i.response$.pipe(Object(v.a)(!1)))})).pipe(Object(y.a)(!1)),R=o.pipe(I(L.pipe(Object(f.a)((function(e){return!e})))),Object(f.a)((function(t){var r=xe(t,2),o=r[0],i=r[1];return{cause:n.Hint,url:new URL(i.href,e.href),anchor:i,event:o,cacheNr:e.cacheNr}})),Object(p.a)((function(t){return _(t,Ve(e))}))),T=Object(c.a)(R,A).pipe(Object(O.a)((function(t,r){return e.compareContext(t,r)})),Object(g.a)((function(t){return e.fetchManager.fetchPage(t)})),Object(y.a)({url:{}}),Object(d.a)()),x=i.response$=A.pipe(Object(h.a)((function(t){e.eventManager.onStart(t),e.historyManager.updateHistoryState(t),e._url=t.url})),Object(j.a)(T),Object(g.a)((function(t){var r;return(r=e.fetchManager).getResponse.apply(r,[T].concat(Te(t)))})),Object(d.a)()),q=x.pipe(Object(p.a)((function(e){return!e.error}))),M=x.pipe(Object(p.a)((function(e){return!!e.error}))),N=q.pipe(Object(f.a)((function(t){return e.updateManager.responseToContent(t)})),Object(h.a)((function(t){return e.eventManager.emitReady(t)})),Object(m.a)(u.a),Object(h.a)((function(t){e.updateManager.updateDOM(t),e.historyManager.updateTitle(t),e.eventManager.emitAfter(t)})),Object(y.a)({cause:n.Init,url:e._url,scripts:[]}),Object(m.a)(u.a),Object(h.a)((function(t){return e.scrollManager.manageScrollPosition(t)})),Object(h.a)({error:function(t){return e.eventManager.emitDOMError(t)}}),Object(w.a)((function(e,t){return t})),Object(g.a)((function(t){return e.updateManager.reinsertScriptTags(t)})),Object(h.a)({error:function(t){return e.eventManager.emitError(t)}}),Object(w.a)((function(e,t){return t})),Object(h.a)((function(t){return e.eventManager.emitLoad(t)}))),H=M.pipe(Object(h.a)((function(e){return console.log(e)})),Object(h.a)((function(t){return e.eventManager.emitNetworkError(t)}))),$=A.pipe(Object(g.a)((function(t){return Object(l.a)((function(){return e.animPromise})).pipe(Object(S.a)(x),Object(v.a)(t))})),Object(h.a)((function(t){return e.eventManager.emitProgress(t)})));N.subscribe(),C.subscribe(),H.subscribe(),$.subscribe(),e.fireEvent("init")},e}return _e(r,[{key:"createRenderRoot",value:function(){return this}},{key:"_setLocation",value:function(e,t){var r=new URL(this._url.href);r[e]=t,this.assign(r.href)}},{key:"assign",value:function(e){this.reload$.next({cause:n.Push,url:new URL(e,this.href),cacheNr:++this.cacheNr})}},{key:"reload",value:function(){this.reload$.next({cause:n.Push,url:new URL(this.href),cacheNr:++this.cacheNr,replace:!0})}},{key:"replace",value:function(e){this.reload$.next({cause:n.Push,url:new URL(e,this.href),cacheNr:++this.cacheNr,replace:!0})}},{key:"fireEvent",value:function(e,t){this.dispatchEvent(new CustomEvent(e,t)),this.dispatchEvent(new CustomEvent("hy-push-state-".concat(e),t))}},{key:"compareContext",value:function(e,t){return e.url.href===t.url.href&&e.error===t.error&&e.cacheNr===t.cacheNr}},{key:"connectedCallback",value:function(){De(ze(r.prototype),"connectedCallback",this).call(this),this.$.linkSelector=new s.a(this.linkSelector),this.$.prefetch=new s.a(this.prefetch),window.addEventListener("beforeunload",this.historyManager.updateHistoryScrollPosition),this.updateComplete.then(this.upgrade)}},{key:"disconnectedCallback",value:function(){window.removeEventListener("beforeunload",this.historyManager.updateHistoryScrollPosition)}},{key:"hash",get:function(){return this._url.hash},set:function(e){this._setLocation("hash",e)}},{key:"host",get:function(){return this._url.host},set:function(e){this._setLocation("host",e)}},{key:"hostname",get:function(){return this._url.hostname},set:function(e){this._setLocation("hostname",e)}},{key:"href",get:function(){return this._url.href},set:function(e){this._setLocation("href",e)}},{key:"pathname",get:function(){return this._url.pathname},set:function(e){this._setLocation("pathname",e)}},{key:"port",get:function(){return this._url.port},set:function(e){this._setLocation("port",e)}},{key:"protocol",get:function(){return this._url.protocol},set:function(e){this._setLocation("protocol",e)}},{key:"search",get:function(){return this._url.search},set:function(e){this._setLocation("search",e)}},{key:"origin",get:function(){return this._url.origin},set:function(e){}},{key:"ancestorOrigins",get:function(){return window.location.ancestorOrigins},set:function(e){}},{key:"histId",get:function(){return this.id||this.tagName}}]),r}((Ge=Xe,[Oe].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){Ge.prototype[t]=e.prototype[t]}))})),Ge)),Ke([Object(o.e)({type:String,reflect:!0,attribute:"replace-selector"})],Je.prototype,"replaceSelector",void 0),Ke([Object(o.e)({type:String,reflect:!0,attribute:"link-selector"})],Je.prototype,"linkSelector",void 0),Ke([Object(o.e)({type:String,reflect:!0,attribute:"script-selector"})],Je.prototype,"scriptSelector",void 0),Ke([Object(o.e)({type:Boolean,reflect:!0,attribute:"prefetch"})],Je.prototype,"prefetch",void 0),Ke([Object(o.e)({type:Number,reflect:!0,attribute:"duration"})],Je.prototype,"duration",void 0),Ke([Object(o.e)({type:Boolean,reflect:!0,attribute:"hashchange"})],Je.prototype,"simulateHashChange",void 0),Ke([Object(o.e)({type:String})],Je.prototype,"baseURL",void 0),Ke([Object(o.e)()],Je.prototype,"assign",null),Ke([Object(o.e)()],Je.prototype,"reload",null),Ke([Object(o.e)()],Je.prototype,"replace",null),Je=Ke([Object(o.c)("hy-push-state")],Je));
/**
 * Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @license
 * @nocompile
 */}}]);